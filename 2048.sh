#!/bin/bash

################################################################################
## Feature  : 2048 in bash
## Author   : Zhang Lue 
## Date     : 2015.11.18
################################################################################

################################################################################
## CONST VARIABLES
################################################################################
OUTPUT_SEPERATOR="########################################"

################################################################################
## INITIALISE
################################################################################
_initialise()
{
    blockStatus=( 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 )
}

################################################################################
## READ ACTION
################################################################################
_read_action()
{
    local input=""
    read -sn 1 -t 1 input 
    echo $input
}

################################################################################
## SHOW
################################################################################
_show()
{
    local i=0
    local j=0
    local rowString=""
    echo ""
    echo $OUTPUT_SEPERATOR
    for (( i=0; i < 4; ++i ))
    do
        rowString=""
        for (( j=0; j < 4; ++j ))
        do
            rowString="$rowString ${blockStatus[$(( $i * 4 + $j ))]}"
        done
        echo $rowString
    done
    case $curAction in 
        W | w)
            echo "UP"
            ;;
        S | s)
            echo "DOWN"
            ;;
        A | a)
            echo "LEFT"
            ;;
        D | d)
            echo "RIGHT"
            ;;
        Q | q)
            echo "QUIT"
            break
            ;;
        *)
            echo "HEHE"
            ;;
    esac
    echo $OUTPUT_SEPERATOR
}

################################################################################
## MAIN
################################################################################

_initialise

while :
do
    curAction=`_read_action`
    _show
done
